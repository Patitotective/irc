<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>src/irc</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">src/irc</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#AsyncIrc"
    title="AsyncIrc = ref IrcBaseObj[AsyncSocket]">AsyncIrc</a></li>
  <li><a class="reference" href="#Irc"
    title="Irc = ref IrcBaseObj[Socket]">Irc</a></li>
  <li><a class="reference" href="#IrcBase"
    title="IrcBase[T] = ref IrcBaseObj[T]">IrcBase</a></li>
  <li><a class="reference" href="#IrcBaseObj"
    title="IrcBaseObj[SockType] = object
  address: string
  port: Port
  nick, user, realname, serverPass: string
  sock: SockType
  when SockType is AsyncSocket:
    handleEvent
  else:
    eventsQueue
  status: Info
  lastPing: float
  lastPong: float
  lag: float
  channelsToJoin: seq[string]
  msgLimit: bool
  messageBuffer: seq[tuple[timeToSend: float, m: string]]
  lastReconnect: float
  userList: Table[string, UserList]">IrcBaseObj</a></li>
  <li><a class="reference" href="#IrcEvent"
    title="IrcEvent = object
  case typ*: IrcEventType
  of EvConnected:
      nil ## Connected to server. This event is fired when the ``001`` numeric
          ## is received from the server. After this event is fired you can
          ## safely start sending commands to the server.
    
  of EvDisconnected:
      nil                    ## Disconnected from the server
    
  of EvTimeout:
      nil                    ## Connection timed out.
    
  of EvMsg:                 ## Message from the server
      cmd*: IrcMType         ## Command (e.g. PRIVMSG)
      nick*, user*, host*, servername*: string
      numeric*: string       ## Only applies to ``MNumeric``
      tags*: StringTableRef  ## IRCv3 tags at the start of the message
      params*: seq[string]   ## Parameters of the IRC message
      origin*: string        ## The channel/user that this msg originated from
      raw*: string           ## Raw IRC message
      text*: string          ## Text intended for the recipient (the last value in params).
      timestamp*: Time       ## UNIX epoch time the message was received">IrcEvent</a></li>
  <li><a class="reference" href="#IrcEventType"
    title="IrcEventType = enum
  EvMsg, EvConnected, EvDisconnected, EvTimeout">IrcEventType</a></li>
  <li><a class="reference" href="#IrcMType"
    title="IrcMType = enum
  MUnknown, MNumeric, MPrivMsg, MJoin, MPart, MMode, MTopic, MInvite, MKick,
  MQuit, MNick, MNotice, MPing, MPong, MError">IrcMType</a></li>
  <li><a class="reference" href="#UserList"
    title="UserList = ref object
  list: seq[string]
  finished: bool">UserList</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">close
      <li><a class="reference" href="#close"
    title="close(irc: Irc | AsyncIrc)">close(irc: Irc | AsyncIrc)</a></li>

  </ul>
  <ul class="simple nested-toc-section">connect
      <li><a class="reference" href="#connect%2CAsyncIrc"
    title="connect(irc: AsyncIrc): owned(Future[void])">connect(irc: AsyncIrc): owned(Future[void])</a></li>
  <li><a class="reference" href="#connect%2CIrc"
    title="connect(irc: Irc)">connect(irc: Irc)</a></li>

  </ul>
  <ul class="simple nested-toc-section">getLag
      <li><a class="reference" href="#getLag"
    title="getLag(irc: Irc | AsyncIrc): float">getLag(irc: Irc | AsyncIrc): float</a></li>

  </ul>
  <ul class="simple nested-toc-section">getNick
      <li><a class="reference" href="#getNick"
    title="getNick(irc: Irc | AsyncIrc): string">getNick(irc: Irc | AsyncIrc): string</a></li>

  </ul>
  <ul class="simple nested-toc-section">getUserList
      <li><a class="reference" href="#getUserList%2C%2Cstring"
    title="getUserList(irc: Irc | AsyncIrc; channel: string): seq[string]">getUserList(irc: Irc | AsyncIrc; channel: string): seq[string]</a></li>

  </ul>
  <ul class="simple nested-toc-section">isConnected
      <li><a class="reference" href="#isConnected"
    title="isConnected(irc: Irc | AsyncIrc): bool">isConnected(irc: Irc | AsyncIrc): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">join
      <li><a class="reference" href="#join%2CAsyncIrc%2Cstring%2Cstring"
    title="join(irc: AsyncIrc; channel: string; key = &quot;&quot;): Future[void]">join(irc: AsyncIrc; channel: string; key = &quot;&quot;): Future[void]</a></li>
  <li><a class="reference" href="#join%2CIrc%2Cstring%2Cstring"
    title="join(irc: Irc; channel: string; key = &quot;&quot;)">join(irc: Irc; channel: string; key = &quot;&quot;)</a></li>

  </ul>
  <ul class="simple nested-toc-section">newAsyncIrc
      <li><a class="reference" href="#newAsyncIrc%2Cstring%2CPort%2Cstring%2Cstring%2Cstring%2Cstring%2Cseq%5Bstring%5D%2Cbool%2Cbool%2Cproc%28AsyncIrc%2CIrcEvent%29"
    title="newAsyncIrc(address: string; port: Port = 6667.Port; nick = &quot;NimBot&quot;;
            user = &quot;NimBot&quot;; realname = &quot;NimBot&quot;; serverPass = &quot;&quot;;
            joinChans: seq[string] = @[]; msgLimit: bool = true;
            useSsl: bool = false; sslContext = getDefaultSSL();
            callback: proc (irc: AsyncIrc; ev: IrcEvent): Future[void]): AsyncIrc">newAsyncIrc(address: string; port: Port = 6667.Port; nick = &quot;NimBot&quot;;
            user = &quot;NimBot&quot;; realname = &quot;NimBot&quot;; serverPass = &quot;&quot;;
            joinChans: seq[string] = @[]; msgLimit: bool = true;
            useSsl: bool = false; sslContext = getDefaultSSL();
            callback: proc (irc: AsyncIrc; ev: IrcEvent): Future[void]): AsyncIrc</a></li>

  </ul>
  <ul class="simple nested-toc-section">newIrc
      <li><a class="reference" href="#newIrc%2Cstring%2CPort%2Cstring%2Cstring%2Cstring%2Cstring%2Cseq%5Bstring%5D%2Cbool%2Cbool"
    title="newIrc(address: string; port: Port = 6667.Port; nick = &quot;NimBot&quot;;
       user = &quot;NimBot&quot;; realname = &quot;NimBot&quot;; serverPass = &quot;&quot;;
       joinChans: seq[string] = @[]; msgLimit: bool = true;
       useSsl: bool = false; sslContext = getDefaultSSL()): Irc">newIrc(address: string; port: Port = 6667.Port; nick = &quot;NimBot&quot;;
       user = &quot;NimBot&quot;; realname = &quot;NimBot&quot;; serverPass = &quot;&quot;;
       joinChans: seq[string] = @[]; msgLimit: bool = true;
       useSsl: bool = false; sslContext = getDefaultSSL()): Irc</a></li>

  </ul>
  <ul class="simple nested-toc-section">notice
      <li><a class="reference" href="#notice%2CAsyncIrc%2Cstring%2Cstring"
    title="notice(irc: AsyncIrc; target, message: string): Future[void]">notice(irc: AsyncIrc; target, message: string): Future[void]</a></li>
  <li><a class="reference" href="#notice%2CIrc%2Cstring%2Cstring"
    title="notice(irc: Irc; target, message: string)">notice(irc: Irc; target, message: string)</a></li>

  </ul>
  <ul class="simple nested-toc-section">part
      <li><a class="reference" href="#part%2CAsyncIrc%2Cstring%2Cstring"
    title="part(irc: AsyncIrc; channel, message: string): Future[void]">part(irc: AsyncIrc; channel, message: string): Future[void]</a></li>
  <li><a class="reference" href="#part%2CIrc%2Cstring%2Cstring"
    title="part(irc: Irc; channel, message: string)">part(irc: Irc; channel, message: string)</a></li>

  </ul>
  <ul class="simple nested-toc-section">poll
      <li><a class="reference" href="#poll%2CIrc%2CIrcEvent%2Cint"
    title="poll(irc: Irc; ev: var IrcEvent; timeout: int = 500): bool">poll(irc: Irc; ev: var IrcEvent; timeout: int = 500): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">privmsg
      <li><a class="reference" href="#privmsg%2CAsyncIrc%2Cstring%2Cstring"
    title="privmsg(irc: AsyncIrc; target, message: string): Future[void]">privmsg(irc: AsyncIrc; target, message: string): Future[void]</a></li>
  <li><a class="reference" href="#privmsg%2CIrc%2Cstring%2Cstring"
    title="privmsg(irc: Irc; target, message: string)">privmsg(irc: Irc; target, message: string)</a></li>

  </ul>
  <ul class="simple nested-toc-section">reconnect
      <li><a class="reference" href="#reconnect%2CAsyncIrc%2Cint"
    title="reconnect(irc: AsyncIrc; timeout = 5000): owned(Future[void])">reconnect(irc: AsyncIrc; timeout = 5000): owned(Future[void])</a></li>
  <li><a class="reference" href="#reconnect%2CIrc%2Cint"
    title="reconnect(irc: Irc; timeout = 5000)">reconnect(irc: Irc; timeout = 5000)</a></li>

  </ul>
  <ul class="simple nested-toc-section">run
      <li><a class="reference" href="#run%2CAsyncIrc"
    title="run(irc: AsyncIrc): owned(Future[void])">run(irc: AsyncIrc): owned(Future[void])</a></li>

  </ul>
  <ul class="simple nested-toc-section">send
      <li><a class="reference" href="#send%2CAsyncIrc%2Cstring"
    title="send(irc: AsyncIrc; message: string; sendImmediately = false): Future[void]">send(irc: AsyncIrc; message: string; sendImmediately = false): Future[void]</a></li>
  <li><a class="reference" href="#send%2CIrc%2Cstring"
    title="send(irc: Irc; message: string; sendImmediately = false)">send(irc: Irc; message: string; sendImmediately = false)</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>This module implements an asynchronous IRC client.</p>
<p>Currently this module requires at least some knowledge of the IRC protocol. It provides a function for sending raw messages to the IRC server, together with some basic functions like sending a message to a channel. It automizes the process of keeping the connection alive, so you don't need to reply to PING messages. In fact, the server is also PING'ed to check the amount of lag.</p>
<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">client</span> <span class="Operator">=</span> <span class="Identifier">newIrc</span><span class="Punctuation">(</span><span class="StringLit">&quot;picheta.me&quot;</span><span class="Punctuation">,</span> <span class="Identifier">joinChans</span> <span class="Operator">=</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="StringLit">&quot;#bots&quot;</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
<span class="Identifier">client</span><span class="Operator">.</span><span class="Identifier">connect</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
<span class="Keyword">while</span> <span class="Identifier">True</span><span class="Punctuation">:</span>
  <span class="Keyword">var</span> <span class="Identifier">event</span><span class="Punctuation">:</span> <span class="Identifier">IrcEvent</span>
  <span class="Keyword">if</span> <span class="Identifier">client</span><span class="Operator">.</span><span class="Identifier">poll</span><span class="Punctuation">(</span><span class="Identifier">event</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
    <span class="Keyword">case</span> <span class="Identifier">event</span><span class="Operator">.</span><span class="Identifier">typ</span>
    <span class="Keyword">of</span> <span class="Identifier">EvConnected</span><span class="Punctuation">:</span> <span class="Keyword">discard</span>
    <span class="Keyword">of</span> <span class="Identifier">EvDisconnected</span><span class="Punctuation">:</span>
      <span class="Identifier">client</span><span class="Operator">.</span><span class="Identifier">reconnect</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
    <span class="Keyword">of</span> <span class="Identifier">EvMsg</span><span class="Punctuation">:</span>
      <span class="Comment"># Write your message reading code here.</span>
      <span class="Identifier">echo</span> <span class="Identifier">event</span><span class="Operator">.</span><span class="Identifier">raw</span>
   <span class="Keyword">else</span><span class="Punctuation">:</span> <span class="Keyword">discard</span></pre><p><strong>Warning:</strong> The API of this module is unstable, and therefore is subject to change.</p>
</p>
  <div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="AsyncIrc">
<dt><pre><a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <a href="irc.html#IrcBaseObj"><span class="Identifier">IrcBaseObj</span></a><span class="Other">[</span><span class="Identifier">AsyncSocket</span><span class="Other">]</span></pre></dt>
<dd>



</dd>
</div>
<div id="Irc">
<dt><pre><a href="irc.html#Irc"><span class="Identifier">Irc</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <a href="irc.html#IrcBaseObj"><span class="Identifier">IrcBaseObj</span></a><span class="Other">[</span><span class="Identifier">Socket</span><span class="Other">]</span></pre></dt>
<dd>



</dd>
</div>
<div id="IrcBase">
<dt><pre><a href="irc.html#IrcBase"><span class="Identifier">IrcBase</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">ref</span> <a href="irc.html#IrcBaseObj"><span class="Identifier">IrcBaseObj</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
<dd>



</dd>
</div>
<div id="IrcBaseObj">
<dt><pre><a href="irc.html#IrcBaseObj"><span class="Identifier">IrcBaseObj</span></a><span class="Other">[</span><span class="Identifier">SockType</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">address</span><span class="Other">:</span> <span class="Identifier">string</span>
  <span class="Identifier">port</span><span class="Other">:</span> <span class="Identifier">Port</span>
  <span class="Identifier">nick</span><span class="Other">,</span> <span class="Identifier">user</span><span class="Other">,</span> <span class="Identifier">realname</span><span class="Other">,</span> <span class="Identifier">serverPass</span><span class="Other">:</span> <span class="Identifier">string</span>
  <span class="Identifier">sock</span><span class="Other">:</span> <span class="Identifier">SockType</span>
  <span class="Keyword">when</span> <span class="Identifier">SockType</span> <span class="Identifier">is</span> AsyncSocket<span class="Other">:</span>
    <span class="Identifier">handleEvent</span>
  <span class="Keyword">else</span><span class="Other">:</span>
    <span class="Identifier">eventsQueue</span>
  <span class="Identifier">status</span><span class="Other">:</span> <span class="Identifier">Info</span>
  <span class="Identifier">lastPing</span><span class="Other">:</span> <span class="Identifier">float</span>
  <span class="Identifier">lastPong</span><span class="Other">:</span> <span class="Identifier">float</span>
  <span class="Identifier">lag</span><span class="Other">:</span> <span class="Identifier">float</span>
  <span class="Identifier">channelsToJoin</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span>
  <span class="Identifier">msgLimit</span><span class="Other">:</span> <span class="Identifier">bool</span>
  <span class="Identifier">messageBuffer</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">timeToSend</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">,</span> <span class="Identifier">m</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">]</span><span class="Other">]</span>
  <span class="Identifier">lastReconnect</span><span class="Other">:</span> <span class="Identifier">float</span>
  <span class="Identifier">userList</span><span class="Other">:</span> <span class="Identifier">Table</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <a href="irc.html#UserList"><span class="Identifier">UserList</span></a><span class="Other">]</span>
</pre></dt>
<dd>



</dd>
</div>
<div id="IrcEvent">
<dt><pre><a href="irc.html#IrcEvent"><span class="Identifier">IrcEvent</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">typ</span><span class="Operator">*</span><span class="Other">:</span> <a href="irc.html#IrcEventType"><span class="Identifier">IrcEventType</span></a>
  <span class="Keyword">of</span> <span class="Identifier">EvConnected</span><span class="Other">:</span>
      <span class="Keyword">nil</span> <span class="Comment">## Connected to server. This event is fired when the ``001`` numeric</span>
          <span class="Comment">## is received from the server. After this event is fired you can</span>
          <span class="Comment">## safely start sending commands to the server.</span>
    
  <span class="Keyword">of</span> <span class="Identifier">EvDisconnected</span><span class="Other">:</span>
      <span class="Keyword">nil</span>                    <span class="Comment">## Disconnected from the server</span>
    
  <span class="Keyword">of</span> <span class="Identifier">EvTimeout</span><span class="Other">:</span>
      <span class="Keyword">nil</span>                    <span class="Comment">## Connection timed out.</span>
    
  <span class="Keyword">of</span> <span class="Identifier">EvMsg</span><span class="Other">:</span>                 <span class="Comment">## Message from the server</span>
      <span class="Identifier">cmd</span><span class="Operator">*</span><span class="Other">:</span> <a href="irc.html#IrcMType"><span class="Identifier">IrcMType</span></a>         <span class="Comment">## Command (e.g. PRIVMSG)</span>
      <span class="Identifier">nick</span><span class="Operator">*</span><span class="Other">,</span> <span class="Identifier">user</span><span class="Operator">*</span><span class="Other">,</span> <span class="Identifier">host</span><span class="Operator">*</span><span class="Other">,</span> <span class="Identifier">servername</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
      <span class="Identifier">numeric</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>       <span class="Comment">## Only applies to ``MNumeric``</span>
      <span class="Identifier">tags</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">StringTableRef</span>  <span class="Comment">## IRCv3 tags at the start of the message</span>
      <span class="Identifier">params</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span>   <span class="Comment">## Parameters of the IRC message</span>
      <span class="Identifier">origin</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>        <span class="Comment">## The channel/user that this msg originated from</span>
      <span class="Identifier">raw</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>           <span class="Comment">## Raw IRC message</span>
      <span class="Identifier">text</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>          <span class="Comment">## Text intended for the recipient (the last value in params).</span>
      <span class="Identifier">timestamp</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Time</span>       <span class="Comment">## UNIX epoch time the message was received</span>
    
  </pre></dt>
<dd>

IRC Event

</dd>
</div>
<div id="IrcEventType">
<dt><pre><a href="irc.html#IrcEventType"><span class="Identifier">IrcEventType</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">EvMsg</span><span class="Other">,</span> <span class="Identifier">EvConnected</span><span class="Other">,</span> <span class="Identifier">EvDisconnected</span><span class="Other">,</span> <span class="Identifier">EvTimeout</span></pre></dt>
<dd>



</dd>
</div>
<div id="IrcMType">
<dt><pre><a href="irc.html#IrcMType"><span class="Identifier">IrcMType</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">MUnknown</span><span class="Other">,</span> <span class="Identifier">MNumeric</span><span class="Other">,</span> <span class="Identifier">MPrivMsg</span><span class="Other">,</span> <span class="Identifier">MJoin</span><span class="Other">,</span> <span class="Identifier">MPart</span><span class="Other">,</span> <span class="Identifier">MMode</span><span class="Other">,</span> <span class="Identifier">MTopic</span><span class="Other">,</span> <span class="Identifier">MInvite</span><span class="Other">,</span> <span class="Identifier">MKick</span><span class="Other">,</span>
  <span class="Identifier">MQuit</span><span class="Other">,</span> <span class="Identifier">MNick</span><span class="Other">,</span> <span class="Identifier">MNotice</span><span class="Other">,</span> <span class="Identifier">MPing</span><span class="Other">,</span> <span class="Identifier">MPong</span><span class="Other">,</span> <span class="Identifier">MError</span></pre></dt>
<dd>



</dd>
</div>
<div id="UserList">
<dt><pre><a href="irc.html#UserList"><span class="Identifier">UserList</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">list</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span>
  <span class="Identifier">finished</span><span class="Other">:</span> <span class="Identifier">bool</span>
</pre></dt>
<dd>



</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="close">
<dt><pre><span class="Keyword">proc</span> <a href="#close"><span class="Identifier">close</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a> <span class="Operator">|</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">)</span></pre></dt>
<dd>

<p>Closes connection to an IRC server.</p>
<p><strong>Warning:</strong> This procedure does not send a <tt class="docutils literal"><span class="pre">QUIT</span></tt> message to the server.</p>


</dd>
</div>
<div id="connect,AsyncIrc">
<dt><pre><span class="Keyword">proc</span> <a href="#connect%2CAsyncIrc"><span class="Identifier">connect</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Connects to the IRC server as specified by the <tt class="docutils literal"><span class="pre">AsyncIrc</span></tt> instance passed to this procedure.

</dd>
</div>
<div id="connect,Irc">
<dt><pre><span class="Keyword">proc</span> <a href="#connect%2CIrc"><span class="Identifier">connect</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
                         <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Connects to an IRC server as specified by <tt class="docutils literal"><span class="pre">irc</span></tt>.

</dd>
</div>
<div id="getLag">
<dt><pre><span class="Keyword">proc</span> <a href="#getLag"><span class="Identifier">getLag</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a> <span class="Operator">|</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">float</span></pre></dt>
<dd>

<p>Returns the latency between this client and the IRC server in seconds.</p>
<p>If latency is unknown, returns -1.0.</p>


</dd>
</div>
<div id="getNick">
<dt><pre><span class="Keyword">proc</span> <a href="#getNick"><span class="Identifier">getNick</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a> <span class="Operator">|</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>

Returns the current nickname of the client.

</dd>
</div>
<div id="getUserList,,string">
<dt><pre><span class="Keyword">proc</span> <a href="#getUserList%2C%2Cstring"><span class="Identifier">getUserList</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a> <span class="Operator">|</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">channel</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span></pre></dt>
<dd>

Returns the specified channel's user list. The specified channel should be in the form of <tt class="docutils literal"><span class="pre">#chan</span></tt>.

</dd>
</div>
<div id="isConnected">
<dt><pre><span class="Keyword">proc</span> <a href="#isConnected"><span class="Identifier">isConnected</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a> <span class="Operator">|</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>

Returns whether this IRC client is connected to an IRC server.

</dd>
</div>
<div id="join,AsyncIrc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#join%2CAsyncIrc%2Cstring%2Cstring"><span class="Identifier">join</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">channel</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">key</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Joins <tt class="docutils literal"><span class="pre">channel</span></tt> asynchronously.</p>
<p>If key is not <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>, then channel is assumed to be key protected and this function will join the channel using <tt class="docutils literal"><span class="pre">key</span></tt>.</p>


</dd>
</div>
<div id="join,Irc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#join%2CIrc%2Cstring%2Cstring"><span class="Identifier">join</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">channel</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">key</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Joins <tt class="docutils literal"><span class="pre">channel</span></tt>.</p>
<p>If key is not <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>, then channel is assumed to be key protected and this function will join the channel using <tt class="docutils literal"><span class="pre">key</span></tt>.</p>


</dd>
</div>
<div id="newAsyncIrc,string,Port,string,string,string,string,seq[string],bool,bool,proc(AsyncIrc,IrcEvent)">
<dt><pre><span class="Keyword">proc</span> <a href="#newAsyncIrc%2Cstring%2CPort%2Cstring%2Cstring%2Cstring%2Cstring%2Cseq%5Bstring%5D%2Cbool%2Cbool%2Cproc%28AsyncIrc%2CIrcEvent%29"><span class="Identifier">newAsyncIrc</span></a><span class="Other">(</span><span class="Identifier">address</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">port</span><span class="Other">:</span> <span class="Identifier">Port</span> <span class="Other">=</span> <span class="DecNumber">6667</span><span class="Other">.</span><span class="Identifier">Port</span><span class="Other">;</span> <span class="Identifier">nick</span> <span class="Other">=</span> <span class="StringLit">&quot;NimBot&quot;</span><span class="Other">;</span>
                 <span class="Identifier">user</span> <span class="Other">=</span> <span class="StringLit">&quot;NimBot&quot;</span><span class="Other">;</span> <span class="Identifier">realname</span> <span class="Other">=</span> <span class="StringLit">&quot;NimBot&quot;</span><span class="Other">;</span> <span class="Identifier">serverPass</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">;</span>
                 <span class="Identifier">joinChans</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> <span class="Other">=</span> <span class="Operator">@</span><span class="Other">[</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">msgLimit</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">;</span>
                 <span class="Identifier">useSsl</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">sslContext</span> <span class="Other">=</span> <span class="Identifier">getDefaultSSL</span><span class="Other">(</span><span class="Other">)</span><span class="Other">;</span>
                 <span class="Identifier">callback</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">ev</span><span class="Other">:</span> <a href="irc.html#IrcEvent"><span class="Identifier">IrcEvent</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Creates a new asynchronous IRC object instance.</p>
<p><strong>Note:</strong> Do <strong>NOT</strong> use this if you're writing a simple IRC bot which only requires one task to be run, i.e. this should not be used if you want a synchronous IRC client implementation, use <tt class="docutils literal"><span class="pre">irc</span></tt> for that.</p>


</dd>
</div>
<div id="newIrc,string,Port,string,string,string,string,seq[string],bool,bool">
<dt><pre><span class="Keyword">proc</span> <a href="#newIrc%2Cstring%2CPort%2Cstring%2Cstring%2Cstring%2Cstring%2Cseq%5Bstring%5D%2Cbool%2Cbool"><span class="Identifier">newIrc</span></a><span class="Other">(</span><span class="Identifier">address</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">port</span><span class="Other">:</span> <span class="Identifier">Port</span> <span class="Other">=</span> <span class="DecNumber">6667</span><span class="Other">.</span><span class="Identifier">Port</span><span class="Other">;</span> <span class="Identifier">nick</span> <span class="Other">=</span> <span class="StringLit">&quot;NimBot&quot;</span><span class="Other">;</span>
            <span class="Identifier">user</span> <span class="Other">=</span> <span class="StringLit">&quot;NimBot&quot;</span><span class="Other">;</span> <span class="Identifier">realname</span> <span class="Other">=</span> <span class="StringLit">&quot;NimBot&quot;</span><span class="Other">;</span> <span class="Identifier">serverPass</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">;</span>
            <span class="Identifier">joinChans</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> <span class="Other">=</span> <span class="Operator">@</span><span class="Other">[</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">msgLimit</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">;</span>
            <span class="Identifier">useSsl</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">sslContext</span> <span class="Other">=</span> <span class="Identifier">getDefaultSSL</span><span class="Other">(</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Creates a <tt class="docutils literal"><span class="pre">Irc</span></tt> object.

</dd>
</div>
<div id="notice,AsyncIrc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#notice%2CAsyncIrc%2Cstring%2Cstring"><span class="Identifier">notice</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">target</span><span class="Other">,</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre">notice</span></tt> to <tt class="docutils literal"><span class="pre">target</span></tt> asynchronously. <tt class="docutils literal"><span class="pre">Target</span></tt> can be a channel, or a user.

</dd>
</div>
<div id="notice,Irc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#notice%2CIrc%2Cstring%2Cstring"><span class="Identifier">notice</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">target</span><span class="Other">,</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre">notice</span></tt> to <tt class="docutils literal"><span class="pre">target</span></tt>. <tt class="docutils literal"><span class="pre">Target</span></tt> can be a channel, or a user.

</dd>
</div>
<div id="part,AsyncIrc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#part%2CAsyncIrc%2Cstring%2Cstring"><span class="Identifier">part</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">channel</span><span class="Other">,</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Leaves <tt class="docutils literal"><span class="pre">channel</span></tt> with <tt class="docutils literal"><span class="pre">message</span></tt> asynchronously.

</dd>
</div>
<div id="part,Irc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#part%2CIrc%2Cstring%2Cstring"><span class="Identifier">part</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">channel</span><span class="Other">,</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Leaves <tt class="docutils literal"><span class="pre">channel</span></tt> with <tt class="docutils literal"><span class="pre">message</span></tt>.

</dd>
</div>
<div id="poll,Irc,IrcEvent,int">
<dt><pre><span class="Keyword">proc</span> <a href="#poll%2CIrc%2CIrcEvent%2Cint"><span class="Identifier">poll</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">ev</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="irc.html#IrcEvent"><span class="Identifier">IrcEvent</span></a><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">LibraryError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">KeyError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>This function parses a single message from the IRC server and returns a IRCEvent.</p>
<p>This function should be called often as it also handles pinging the server.</p>
<p>This function provides a somewhat asynchronous IRC implementation, although it should only be used for simple things, for example an IRC bot which does not need to be running many time critical tasks in the background. If you require this, use the AsyncIrc implementation.</p>


</dd>
</div>
<div id="privmsg,AsyncIrc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#privmsg%2CAsyncIrc%2Cstring%2Cstring"><span class="Identifier">privmsg</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">target</span><span class="Other">,</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre">message</span></tt> to <tt class="docutils literal"><span class="pre">target</span></tt> asynchronously. <tt class="docutils literal"><span class="pre">Target</span></tt> can be a channel, or a user.

</dd>
</div>
<div id="privmsg,Irc,string,string">
<dt><pre><span class="Keyword">proc</span> <a href="#privmsg%2CIrc%2Cstring%2Cstring"><span class="Identifier">privmsg</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">target</span><span class="Other">,</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre">message</span></tt> to <tt class="docutils literal"><span class="pre">target</span></tt>. <tt class="docutils literal"><span class="pre">Target</span></tt> can be a channel, or a user.

</dd>
</div>
<div id="reconnect,AsyncIrc,int">
<dt><pre><span class="Keyword">proc</span> <a href="#reconnect%2CAsyncIrc%2Cint"><span class="Identifier">reconnect</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">timeout</span> <span class="Other">=</span> <span class="DecNumber">5000</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Reconnects to an IRC server.</p>
<p><tt class="docutils literal"><span class="pre">Timeout</span></tt> specifies the time to wait in miliseconds between multiple consecutive reconnections.</p>
<p>This should be used when an <tt class="docutils literal"><span class="pre">EvDisconnected</span></tt> event occurs.</p>


</dd>
</div>
<div id="reconnect,Irc,int">
<dt><pre><span class="Keyword">proc</span> <a href="#reconnect%2CIrc%2Cint"><span class="Identifier">reconnect</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">timeout</span> <span class="Other">=</span> <span class="DecNumber">5000</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Reconnects to an IRC server.</p>
<p><tt class="docutils literal"><span class="pre">Timeout</span></tt> specifies the time to wait in miliseconds between multiple consecutive reconnections.</p>
<p>This should be used when an <tt class="docutils literal"><span class="pre">EvDisconnected</span></tt> event occurs.</p>


</dd>
</div>
<div id="run,AsyncIrc">
<dt><pre><span class="Keyword">proc</span> <a href="#run%2CAsyncIrc"><span class="Identifier">run</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Initiates the long-running event loop.</p>
<p>This asynchronous procedure will keep receiving messages from the IRC server and will fire appropriate events until the IRC client is closed by the user, the server closes the connection, or an error occurs.</p>
<p>You should not <tt class="docutils literal"><span class="pre">await</span></tt> this procedure but you should <tt class="docutils literal"><span class="pre">asyncCheck</span></tt> it.</p>
<p>For convenience, this procedure will call <tt class="docutils literal"><span class="pre">connect</span></tt> implicitly if it was not previously called.</p>


</dd>
</div>
<div id="send,AsyncIrc,string">
<dt><pre><span class="Keyword">proc</span> <a href="#send%2CAsyncIrc%2Cstring"><span class="Identifier">send</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#AsyncIrc"><span class="Identifier">AsyncIrc</span></a><span class="Other">;</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">sendImmediately</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><span class="Identifier">void</span><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Sends <tt class="docutils literal"><span class="pre">message</span></tt> as a raw command asynchronously. It adds <tt class="docutils literal"><span class="pre">\c\L</span></tt> for you.</p>
<p>Buffering is performed automatically if you attempt to send messages too quickly to prevent excessive flooding of the IRC server. You can prevent buffering by specifying <tt class="docutils literal"><span class="pre">True</span></tt> for the <tt class="docutils literal"><span class="pre">sendImmediately</span></tt> param.</p>


</dd>
</div>
<div id="send,Irc,string">
<dt><pre><span class="Keyword">proc</span> <a href="#send%2CIrc%2Cstring"><span class="Identifier">send</span></a><span class="Other">(</span><span class="Identifier">irc</span><span class="Other">:</span> <a href="irc.html#Irc"><span class="Identifier">Irc</span></a><span class="Other">;</span> <span class="Identifier">message</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">sendImmediately</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">SslError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Sends <tt class="docutils literal"><span class="pre">message</span></tt> as a raw command. It adds <tt class="docutils literal"><span class="pre">\c\L</span></tt> for you.</p>
<p>Buffering is performed automatically if you attempt to send messages too quickly to prevent excessive flooding of the IRC server. You can prevent buffering by specifying <tt class="docutils literal"><span class="pre">True</span></tt> for the <tt class="docutils literal"><span class="pre">sendImmediately</span></tt> param.</p>


</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-01-28 21:52:25 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
